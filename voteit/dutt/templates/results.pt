<tal:main xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="voteit.dutt">
<tal:summary condition="not complete">
	<div tal:condition="result">
	    <tal:iterate repeat="item result">
	    	<div>
	    		<strong>
	    			<span tal:replace="item['percent']">30%</span>
					(<span tal:replace="item['num']">3</span> vote)
				</strong>
			</div>
			<tal:proposal
				define="brain api.get_metadata_for_query(uid=item['uid'])[0]" 
				replace="structure api.render_single_view_component(api.context, api.request, 'proposal', 'block', brain=brain)">
		    	Proposal
		    </tal:proposal>
	    </tal:iterate>
	    <tal:iterate repeat="looser novotes">
	    	<div>
	    		<strong>
	    			<span>0%</span>
					(<span>0</span> votes)
				</strong>
			</div>
			<tal:proposal
				define="brain api.get_metadata_for_query(uid=looser)[0]" 
				replace="structure api.render_single_view_component(api.context, api.request, 'proposal', 'block', brain=brain)">
		    	Proposal
		    </tal:proposal>
	    </tal:iterate>
	</div>
</tal:summary>

<tal:complete condition="complete">
	
	<h3 i18n:translate="">Poll result</h3>
	
	<span i18n:translate="">Total number of votes</span>: ${total_votes}
	
	<table class="listing" tal:condition="result">
	    <thead>
	        <tr>
	            <th i18n:translate="" class="heading">Proposal</th>
	            <th i18n:translate="" class="heading">Count</th>
	            <th i18n:translate="" class="heading">Percent</th>
	        </tr>
	    </thead>
	    <tbody>
	        <tal:iterate repeat="item result">
	        <tr tal:attributes="class repeat.item.odd and 'odd' or 'even'">
	            <td tal:content="get_proposal_by_uid(item['uid']).title"></td>
	            <td tal:content="item['num']">3</td>
	            <td tal:content="item['percent']">3 %</td>
	        </tr>
	        </tal:iterate>
	    </tbody>
	</table>
</tal:complete>
</tal:main>